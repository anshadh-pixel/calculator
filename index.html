<!DOCTYPE html>
<html lang="ml">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: sans-serif; background: linear-gradient(to right, #ffafbd, #ffc3a0); }
        #chatContainer { display: none; height: 100vh; flex-direction: column; }
        #chatBox { flex: 1 1 auto; overflow-y: auto; margin-bottom: 0.5rem; padding: 0.5rem; border: 1px solid #ccc; border-radius: 0.5rem; background: #fff1f2; }
        .chat-message { margin: 8px 0; padding: 8px 12px; border-radius: 12px; position: relative; max-width: 75%; }
        .user { background-color: #fce4ec; color: #880e4f; align-self: flex-end; }
        .gf { background-color: #f3e5f5; color: #4a148c; align-self: flex-start; }
        .fade-in { animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .heart { position: absolute; top: -12px; right: 8px; font-size: 18px; color: red; animation: heartbeat 1.5s infinite; }
        @keyframes heartbeat { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
        #messageInput { resize: none; overflow: hidden; min-height: 2.5rem; max-height: 10rem; width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 0.5rem; }
        #emojiPicker { max-height: 150px; overflow-y: auto; }
        .calculator-button { transition: transform 0.1s; }
        .calculator-button:hover { transform: scale(1.05); }
        @media (max-width: 640px) {
            .container { padding: 0.5rem; }
            #calcDisplay { font-size: 1.5rem; padding: 0.75rem; }
            .calculator-button { padding: 1rem; font-size: 1.25rem; }
            #chatContainer { height: calc(100vh - 2rem); }
            #chatBox { max-height: calc(100vh - 12rem); }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center">
    <div class="container mx-auto p-4 bg-white rounded-lg shadow-lg max-w-sm">
        <!-- Calculator UI -->
        <div id="calculatorContainer">
            <h1 class="text-2xl font-bold mb-4 text-center text-gray-700">Calculator</h1>
            <input type="text" id="calcDisplay" class="w-full p-4 border rounded mb-4 text-xl bg-gray-100" readonly value="0" />
            <div class="grid grid-cols-4 gap-2 mb-2">
                <button onclick="clearCalc()" class="calculator-button bg-red-500 text-white rounded p-4 text-xl">C</button>
                <button onclick="appendCalc('(')" class="calculator-button bg-gray-300 rounded p-4 text-xl">(</button>
                <button onclick="appendCalc(')')" class="calculator-button bg-gray-300 rounded p-4 text-xl">)</button>
                <button onclick="appendCalc('/')" class="calculator-button bg-gray-300 rounded p-4 text-xl">/</button>
                <button onclick="appendCalc('7')" class="calculator-button bg-gray-200 rounded p-4 text-xl">7</button>
                <button onclick="appendCalc('8')" class="calculator-button bg-gray-200 rounded p-4 text-xl">8</button>
                <button onclick="appendCalc('9')" class="calculator-button bg-gray-200 rounded p-4 text-xl">9</button>
                <button onclick="appendCalc('')" class="calculator-button bg-gray-300 rounded p-4 text-xl"></button>
                <button onclick="appendCalc('4')" class="calculator-button bg-gray-200 rounded p-4 text-xl">4</button>
                <button onclick="appendCalc('5')" class="calculator-button bg-gray-200 rounded p-4 text-xl">5</button>
                <button onclick="appendCalc('6')" class="calculator-button bg-gray-200 rounded p-4 text-xl">6</button>
                <button onclick="appendCalc('-')" class="calculator-button bg-gray-300 rounded p-4 text-xl">-</button>
                <button onclick="appendCalc('1')" class="calculator-button bg-gray-200 rounded p-4 text-xl">1</button>
                <button onclick="appendCalc('2')" class="calculator-button bg-gray-200 rounded p-4 text-xl">2</button>
                <button onclick="appendCalc('3')" class="calculator-button bg-gray-200 rounded p-4 text-xl">3</button>
                <button onclick="appendCalc('+')" class="calculator-button bg-gray-300 rounded p-4 text-xl">+</button>
                <button onclick="appendCalc('0')" class="calculator-button bg-gray-200 rounded p-4 text-xl">0</button>
                <button onclick="appendCalc('.')" class="calculator-button bg-gray-200 rounded p-4 text-xl">.</button>
                <button onclick="calculate()" class="calculator-button col-span-2 bg-blue-500 text-white rounded p-4 text-xl">=</button>
            </div>
        </div>
        <!-- Secret Chat UI -->
        <div id="chatContainer" class="flex flex-col">
            <h1 class="text-xl font-bold mb-3 text-center text-pink-600">Secret Chat 💕</h1>
            <div id="chatBox" class="flex-1 overflow-y-auto mb-2 p-2 border rounded bg-pink-50"></div>
            <textarea id="messageInput" class="w-full p-2 border rounded mb-2 text-sm" placeholder="Type your message..." oninput="autoResize.call(this)"></textarea>
            <div id="emojiPicker" class="hidden grid grid-cols-6 gap-2 p-2 bg-white border rounded mb-2">
                <span onclick="appendEmoji('😀')" class="text-xl cursor-pointer">😀</span>
                <span onclick="appendEmoji('😁')" class="text-xl cursor-pointer">😁</span>
                <span onclick="appendEmoji('😂')" class="text-xl cursor-pointer">😂</span>
                <span onclick="appendEmoji('🤣')" class="text-xl cursor-pointer">🤣</span>
                <span onclick="appendEmoji('😃')" class="text-xl cursor-pointer">😃</span>
                <span onclick="appendEmoji('😄')" class="text-xl cursor-pointer">😄</span>
                <span onclick="appendEmoji('😅')" class="text-xl cursor-pointer">😅</span>
                <span onclick="appendEmoji('😆')" class="text-xl cursor-pointer">😆</span>
                <span onclick="appendEmoji('😉')" class="text-xl cursor-pointer">😉</span>
                <span onclick="appendEmoji('😊')" class="text-xl cursor-pointer">😊</span>
                <span onclick="appendEmoji('😋')" class="text-xl cursor-pointer">😋</span>
                <span onclick="appendEmoji('😎')" class="text-xl cursor-pointer">😎</span>
                <span onclick="appendEmoji('😍')" class="text-xl cursor-pointer">😍</span>
                <span onclick="appendEmoji('😘')" class="text-xl cursor-pointer">😘</span>
                <span onclick="appendEmoji('🥰')" class="text-xl cursor-pointer">🥰</span>
                <span onclick="appendEmoji('😗')" class="text-xl cursor-pointer">😗</span>
                <span onclick="appendEmoji('😙')" class="text-xl cursor-pointer">😙</span>
                <span onclick="appendEmoji('😚')" class="text-xl cursor-pointer">😚</span>
                <span onclick="appendEmoji('🙂')" class="text-xl cursor-pointer">🙂</span>
                <span onclick="appendEmoji('🤗')" class="text-xl cursor-pointer">🤗</span>
                <span onclick="appendEmoji('🤩')" class="text-xl cursor-pointer">🤩</span>
                <span onclick="appendEmoji('🤔')" class="text-xl cursor-pointer">🤔</span>
                <span onclick="appendEmoji('🤨')" class="text-xl cursor-pointer">🤨</span>
                <span onclick="appendEmoji('😐')" class="text-xl cursor-pointer">😐</span>
                <span onclick="appendEmoji('😑')" class="text-xl cursor-pointer">😑</span>
                <span onclick="appendEmoji('😶')" class="text-xl cursor-pointer">😶</span>
                <span onclick="appendEmoji('🙄')" class="text-xl cursor-pointer">🙄</span>
                <span onclick="appendEmoji('😏')" class="text-xl cursor-pointer">😏</span>
                <span onclick="appendEmoji('😣')" class="text-xl cursor-pointer">😣</span>
                <span onclick="appendEmoji('😥')" class="text-xl cursor-pointer">😥</span>
                <span onclick="appendEmoji('😮')" class="text-xl cursor-pointer">😮</span>
                <span onclick="appendEmoji('🤐')" class="text-xl cursor-pointer">🤐</span>
                <span onclick="appendEmoji('😯')" class="text-xl cursor-pointer">😯</span>
                <span onclick="appendEmoji('😪')" class="text-xl cursor-pointer">😪</span>
                <span onclick="appendEmoji('😫')" class="text-xl cursor-pointer">😫</span>
                <span onclick="appendEmoji('😴')" class="text-xl cursor-pointer">😴</span>
                <span onclick="appendEmoji('😌')" class="text-xl cursor-pointer">😌</span>
                <span onclick="appendEmoji('😛')" class="text-xl cursor-pointer">😛</span>
                <span onclick="appendEmoji('😜')" class="text-xl cursor-pointer">😜</span>
                <span onclick="appendEmoji('😝')" class="text-xl cursor-pointer">😝</span>
                <span onclick="appendEmoji('🤤')" class="text-xl cursor-pointer">🤤</span>
                <span onclick="appendEmoji('😒')" class="text-xl cursor-pointer">😒</span>
                <span onclick="appendEmoji('😓')" class="text-xl cursor-pointer">😓</span>
                <span onclick="appendEmoji('😔')" class="text-xl cursor-pointer">😔</span>
                <span onclick="appendEmoji('😕')" class="text-xl cursor-pointer">😕</span>
                <span onclick="appendEmoji('🙃')" class="text-xl cursor-pointer">🙃</span>
                <span onclick="appendEmoji('🤑')" class="text-xl cursor-pointer">🤑</span>
                <span onclick="appendEmoji('😲')" class="text-xl cursor-pointer">😲</span>
                <span onclick="appendEmoji('🙁')" class="text-xl cursor-pointer">🙁</span>
                <span onclick="appendEmoji('😖')" class="text-xl cursor-pointer">😖</span>
                <span onclick="appendEmoji('😞')" class="text-xl cursor-pointer">😞</span>
                <span onclick="appendEmoji('😟')" class="text-xl cursor-pointer">😟</span>
                <span onclick="appendEmoji('😤')" class="text-xl cursor-pointer">😤</span>
                <span onclick="appendEmoji('😢')" class="text-xl cursor-pointer">😢</span>
                <span onclick="appendEmoji('😭')" class="text-xl cursor-pointer">😭</span>
                <span onclick="appendEmoji('😦')" class="text-xl cursor-pointer">😦</span>
                <span onclick="appendEmoji('😧')" class="text-xl cursor-pointer">😧</span>
                <span onclick="appendEmoji('😨')" class="text-xl cursor-pointer">😨</span>
                <span onclick="appendEmoji('😩')" class="text-xl cursor-pointer">😩</span>
                <span onclick="appendEmoji('🤯')" class="text-xl cursor-pointer">🤯</span>
                <span onclick="appendEmoji('😬')" class="text-xl cursor-pointer">😬</span>
                <span onclick="appendEmoji('😰')" class="text-xl cursor-pointer">😰</span>
                <span onclick="appendEmoji('😱')" class="text-xl cursor-pointer">😱</span>
                <span onclick="appendEmoji('🥵')" class="text-xl cursor-pointer">🥵</span>
                <span onclick="appendEmoji('🥶')" class="text-xl cursor-pointer">🥶</span>
                <span onclick="appendEmoji('😳')" class="text-xl cursor-pointer">😳</span>
                <span onclick="appendEmoji('🤪')" class="text-xl cursor-pointer">🤪</span>
                <span onclick="appendEmoji('😵')" class="text-xl cursor-pointer">😵</span>
                <span onclick="appendEmoji('😡')" class="text-xl cursor-pointer">😡</span>
                <span onclick="appendEmoji('😠')" class="text-xl cursor-pointer">😠</span>
                <span onclick="appendEmoji('🤬')" class="text-xl cursor-pointer">🤬</span>
                <span onclick="appendEmoji('😷')" class="text-xl cursor-pointer">😷</span>
                <span onclick="appendEmoji('🤒')" class="text-xl cursor-pointer">🤒</span>
                <span onclick="appendEmoji('🤕')" class="text-xl cursor-pointer">🤕</span>
                <span onclick="appendEmoji('🤢')" class="text-xl cursor-pointer">🤢</span>
                <span onclick="appendEmoji('🤮')" class="text-xl cursor-pointer">🤮</span>
                <span onclick="appendEmoji('🤧')" class="text-xl cursor-pointer">🤧</span>
                <span onclick="appendEmoji('😇')" class="text-xl cursor-pointer">😇</span>
                <span onclick="appendEmoji('🥳')" class="text-xl cursor-pointer">🥳</span>
                <span onclick="appendEmoji('🥴')" class="text-xl cursor-pointer">🥴</span>
                <span onclick="appendEmoji('🥺')" class="text-xl cursor-pointer">🥺</span>
                <span onclick="appendEmoji('🤠')" class="text-xl cursor-pointer">🤠</span>
                <span onclick="appendEmoji('🤡')" class="text-xl cursor-pointer">🤡</span>
                <span onclick="appendEmoji('🤥')" class="text-xl cursor-pointer">🤥</span>
                <span onclick="appendEmoji('🤫')" class="text-xl cursor-pointer">🤫</span>
                <span onclick="appendEmoji('🤭')" class="text-xl cursor-pointer">🤭</span>
                <span onclick="appendEmoji('🧐')" class="text-xl cursor-pointer">🧐</span>
                <span onclick="appendEmoji('🤓')" class="text-xl cursor-pointer">🤓</span>
                <span onclick="appendEmoji('😈')" class="text-xl cursor-pointer">😈</span>
                <span onclick="appendEmoji('👿')" class="text-xl cursor-pointer">👿</span>
                <span onclick="appendEmoji('👹')" class="text-xl cursor-pointer">👹</span>
                <span onclick="appendEmoji('👺')" class="text-xl cursor-pointer">👺</span>
                <span onclick="appendEmoji('💀')" class="text-xl cursor-pointer">💀</span>
                <span onclick="appendEmoji('☠')" class="text-xl cursor-pointer">☠</span>
                <span onclick="appendEmoji('👻')" class="text-xl cursor-pointer">👻</span>
                <span onclick="appendEmoji('👽')" class="text-xl cursor-pointer">👽</span>
                <span onclick="appendEmoji('👾')" class="text-xl cursor-pointer">👾</span>
                <span onclick="appendEmoji('🤖')" class="text-xl cursor-pointer">🤖</span>
                <span onclick="appendEmoji('💩')" class="text-xl cursor-pointer">💩</span>
                <span onclick="appendEmoji('😺')" class="text-xl cursor-pointer">😺</span>
                <span onclick="appendEmoji('😸')" class="text-xl cursor-pointer">😸</span>
                <span onclick="appendEmoji('😹')" class="text-xl cursor-pointer">😹</span>
                <span onclick="appendEmoji('😻')" class="text-xl cursor-pointer">😻</span>
                <span onclick="appendEmoji('😼')" class="text-xl cursor-pointer">😼</span>
                <span onclick="appendEmoji('😽')" class="text-xl cursor-pointer">😽</span>
                <span onclick="appendEmoji('🙀')" class="text-xl cursor-pointer">🙀</span>
                <span onclick="appendEmoji('😿')" class="text-xl cursor-pointer">😿</span>
                <span onclick="appendEmoji('😾')" class="text-xl cursor-pointer">😾</span>
                <span onclick="appendEmoji('🙈')" class="text-xl cursor-pointer">🙈</span>
                <span onclick="appendEmoji('🙉')" class="text-xl cursor-pointer">🙉</span>
                <span onclick="appendEmoji('🙊')" class="text-xl cursor-pointer">🙊</span>
                <span onclick="appendEmoji('💋')" class="text-xl cursor-pointer">💋</span>
                <span onclick="appendEmoji('💌')" class="text-xl cursor-pointer">💌</span>
                <span onclick="appendEmoji('💘')" class="text-xl cursor-pointer">💘</span>
                <span onclick="appendEmoji('💝')" class="text-xl cursor-pointer">💝</span>
                <span onclick="appendEmoji('💖')" class="text-xl cursor-pointer">💖</span>
                <span onclick="appendEmoji('💗')" class="text-xl cursor-pointer">💗</span>
                <span onclick="appendEmoji('💓')" class="text-xl cursor-pointer">💓</span>
                <span onclick="appendEmoji('💞')" class="text-xl cursor-pointer">💞</span>
                <span onclick="appendEmoji('💕')" class="text-xl cursor-pointer">💕</span>
                <span onclick="appendEmoji('💟')" class="text-xl cursor-pointer">💟</span>
                <span onclick="appendEmoji('❣')" class="text-xl cursor-pointer">❣</span>
                <span onclick="appendEmoji('💔')" class="text-xl cursor-pointer">💔</span>
                <span onclick="appendEmoji('❤')" class="text-xl cursor-pointer">❤</span>
                <span onclick="appendEmoji('🧡')" class="text-xl cursor-pointer">🧡</span>
                <span onclick="appendEmoji('💛')" class="text-xl cursor-pointer">💛</span>
                <span onclick="appendEmoji('💚')" class="text-xl cursor-pointer">💚</span>
                <span onclick="appendEmoji('💙')" class="text-xl cursor-pointer">💙</span>
                <span onclick="appendEmoji('💜')" class="text-xl cursor-pointer">💜</span>
                <span onclick="appendEmoji('🖤')" class="text-xl cursor-pointer">🖤</span>
                <span onclick="appendEmoji('💯')" class="text-xl cursor-pointer">💯</span>
                <span onclick="appendEmoji('💢')" class="text-xl cursor-pointer">💢</span>
                <span onclick="appendEmoji('💥')" class="text-xl cursor-pointer">💥</span>
                <span onclick="appendEmoji('💫')" class="text-xl cursor-pointer">💫</span>
                <span onclick="appendEmoji('💦')" class="text-xl cursor-pointer">💦</span>
                <span onclick="appendEmoji('💨')" class="text-xl cursor-pointer">💨</span>
                <span onclick="appendEmoji('🕳')" class="text-xl cursor-pointer">🕳</span>
                <span onclick="appendEmoji('💣')" class="text-xl cursor-pointer">💣</span>
                <span onclick="appendEmoji('💬')" class="text-xl cursor-pointer">💬</span>
                <span onclick="appendEmoji('👁‍🗨')" class="text-xl cursor-pointer">👁‍🗨</span>
                <span onclick="appendEmoji('🗨')" class="text-xl cursor-pointer">🗨</span>
                <span onclick="appendEmoji('🗯')" class="text-xl cursor-pointer">🗯</span>
                <span onclick="appendEmoji('💭')" class="text-xl cursor-pointer">💭</span>
                <span onclick="appendEmoji('💤')" class="text-xl cursor-pointer">💤</span>
                <span onclick="appendEmoji('👋')" class="text-xl cursor-pointer">👋</span>
                <span onclick="appendEmoji('🤚')" class="text-xl cursor-pointer">🤚</span>
                <span onclick="appendEmoji('🖐')" class="text-xl cursor-pointer">🖐</span>
                <span onclick="appendEmoji('✋')" class="text-xl cursor-pointer">✋</span>
                <span onclick="appendEmoji('🖖')" class="text-xl cursor-pointer">🖖</span>
                <span onclick="appendEmoji('👌')" class="text-xl cursor-pointer">👌</span>
                <span onclick="appendEmoji('🤌')" class="text-xl cursor-pointer">🤌</span>
                <span onclick="appendEmoji('🤏')" class="text-xl cursor-pointer">🤏</span>
                <span onclick="appendEmoji('✌')" class="text-xl cursor-pointer">✌</span>
                <span onclick="appendEmoji('🤞')" class="text-xl cursor-pointer">🤞</span>
                <span onclick="appendEmoji('🤟')" class="text-xl cursor-pointer">🤟</span>
                <span onclick="appendEmoji('🤘')" class="text-xl cursor-pointer">🤘</span>
                <span onclick="appendEmoji('🤙')" class="text-xl cursor-pointer">🤙</span>
                <span onclick="appendEmoji('👈')" class="text-xl cursor-pointer">👈</span>
                <span onclick="appendEmoji('👉')" class="text-xl cursor-pointer">👉</span>
                <span onclick="appendEmoji('👆')" class="text-xl cursor-pointer">👆</span>
                <span onclick="appendEmoji('🖕')" class="text-xl cursor-pointer">🖕</span>
                <span onclick="appendEmoji('👇')" class="text-xl cursor-pointer">👇</span>
                <span onclick="appendEmoji('☝')" class="text-xl cursor-pointer">☝</span>
                <span onclick="appendEmoji('👍')" class="text-xl cursor-pointer">👍</span>
                <span onclick="appendEmoji('👎')" class="text-xl cursor-pointer">👎</span>
                <span onclick="appendEmoji('✊')" class="text-xl cursor-pointer">✊</span>
                <span onclick="appendEmoji('👊')" class="text-xl cursor-pointer">👊</span>
                <span onclick="appendEmoji('🤛')" class="text-xl cursor-pointer">🤛</span>
                <span onclick="appendEmoji('🤜')" class="text-xl cursor-pointer">🤜</span>
                <span onclick="appendEmoji('👏')" class="text-xl cursor-pointer">👏</span>
                <span onclick="appendEmoji('🙌')" class="text-xl cursor-pointer">🙌</span>
                <span onclick="appendEmoji('👐')" class="text-xl cursor-pointer">👐</span>
                <span onclick="appendEmoji('🤝')" class="text-xl cursor-pointer">🤝</span>
                <span onclick="appendEmoji('🙏')" class="text-xl cursor-pointer">🙏</span>
            </div>
            <div class="flex gap-2 mb-2">
                <button onclick="toggleEmojiPicker()" class="bg-yellow-500 text-white p-2 rounded">😊</button>
            </div>
            <div class="flex gap-2">
                <button onclick="sendMessage('user')" class="flex-1 bg-pink-500 text-white p-2 rounded">Send as Pottan</button>
                <button onclick="sendMessage('gf')" class="flex-1 bg-purple-500 text-white p-2 rounded">Send as AD</button>
                <button onclick="clearChat()" class="flex-1 bg-red-500 text-white p-2 rounded">Clear Chat</button>
            </div>
        </div>
    </div>
    <script>
        const secretCode = "143";
        let calcExpression = "0";
        const firebaseConfig = {
            apiKey: "AIzaSyCwTOyFWHr_D4GA_BhToXSZdwZJ0y2dzzY",
            authDomain: "calculator-9af33.firebaseapp.com",
            databaseURL: "https://calculator-9af33-default-rtdb.firebaseio.com",
            projectId: "calculator-9af33",
            storageBucket: "calculator-9af33.appspot.com",
            messagingSenderId: "495489899116",
            appId: "1:495489899116:web:ae94bd679132e6746bd649"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function appendCalc(value) {
            if (calcExpression === "0") calcExpression = "";
            calcExpression += value;
            document.getElementById('calcDisplay').value = calcExpression;
        }

        function clearCalc() {
            calcExpression = "0";
            document.getElementById('calcDisplay').value = calcExpression;
        }

        function calculate() {
            let input = document.getElementById('calcDisplay').value;
            if (input === secretCode) {
                document.getElementById('calculatorContainer').style.display = 'none';
                document.getElementById('chatContainer').style.display = 'flex';
                loadMessages();
            } else {
                try {
                    calcExpression = eval(input).toString();
                    document.getElementById('calcDisplay').value = calcExpression;
                } catch {
                    alert("Invalid calculation!");
                    clearCalc();
                }
            }
        }

        function autoResize() {
            this.style.height = 'auto';
            this.style.height = `${this.scrollHeight}px`;
        }

        function toggleEmojiPicker() {
            document.getElementById('emojiPicker').classList.toggle('hidden');
        }

        function appendEmoji(emoji) {
            const messageInput = document.getElementById('messageInput');
            messageInput.value += emoji;
            toggleEmojiPicker();
            autoResize.call(messageInput);
        }

        function sendMessage(sender) {
            const input = document.getElementById('messageInput').value;
            if (input.trim()) {
                db.ref("messages").push({
                    text: input,
                    sender: sender,
                    timestamp: Date.now()
                });
                document.getElementById('messageInput').value = '';
                autoResize.call(document.getElementById('messageInput'));
                document.getElementById('messageInput').blur(); // Dismiss keyboard
            }
        }

        function loadMessages() {
            const chatBox = document.getElementById('chatBox');
            chatBox.innerHTML = '';
            db.ref("messages").on("child_added", snapshot => {
                const msg = snapshot.val();
                const div = document.createElement('div');
                div.className = `chat-message ${msg.sender} fade-in`;
                div.innerHTML =` ${msg.text} <span class="heart">❤</span>`;
                chatBox.appendChild(div);
                chatBox.scrollTop = chatBox.scrollHeight;
            });
        }

        function clearChat() {
            db.ref("messages").remove();
            document.getElementById('chatBox').innerHTML = '';
        }

        // Prevent scrolling when focusing on the input
        document.getElementById('messageInput')?.addEventListener('focus', () => {
            window.scrollTo(0, 0);
            document.body.style.overflow = 'hidden';
        });

        document.getElementById('messageInput')?.addEventListener('blur', () => {
            document.body.style.overflow = 'auto';
        });
    </script>
</body>
</html>
