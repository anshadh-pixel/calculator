<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculater</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body { font-family: sans-serif; background: linear-gradient(to right, #ffafbd, #ffc3a0); }
    #chatContainer { display: none; }
    .chat-message { margin: 8px 0; padding: 8px 12px; border-radius: 12px; position: relative; max-width: 75%; }
    .user { background-color: #fce4ec; color: #880e4f; align-self: flex-end; }
    .gf { background-color: #f3e5f5; color: #4a148c; align-self: flex-start; }
    .fade-in { animation: fadeIn 0.5s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .heart { position: absolute; top: -12px; right: 8px; font-size: 18px; color: red; animation: heartbeat 1.5s infinite; }
    @keyframes heartbeat { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center">
  <div class="container mx-auto p-4 bg-white rounded-lg shadow-lg max-w-sm">
    <!-- Calculator UI -->
    <div id="calculatorContainer">
      <h1 id="calcTitle" class="text-xl font-bold mb-3 text-center text-gray-700">Calculater</h1>
      <input type="text" id="calcDisplay" class="w-full p-2 border rounded mb-2 text-sm bg-gray-100" readonly value="0" />
      <div class="grid grid-cols-4 gap-1 mb-2">
        <button onclick="clearCalc()" class="bg-red-500 text-white rounded">C</button>
        <button onclick="appendCalc('(')" class="bg-gray-300 rounded">(</button>
        <button onclick="appendCalc(')')" class="bg-gray-300 rounded">)</button>
        <button onclick="appendCalc('/')" class="bg-gray-300 rounded">/</button>
        <button onclick="appendCalc('7')" class="bg-gray-200 rounded">7</button>
        <button onclick="appendCalc('8')" class="bg-gray-200 rounded">8</button>
        <button onclick="appendCalc('9')" class="bg-gray-200 rounded">9</button>
        <button onclick="appendCalc('*')" class="bg-gray-300 rounded">*</button>
        <button onclick="appendCalc('4')" class="bg-gray-200 rounded">4</button>
        <button onclick="appendCalc('5')" class="bg-gray-200 rounded">5</button>
        <button onclick="appendCalc('6')" class="bg-gray-200 rounded">6</button>
        <button onclick="appendCalc('-')" class="bg-gray-300 rounded">-</button>
        <button onclick="appendCalc('1')" class="bg-gray-200 rounded">1</button>
        <button onclick="appendCalc('2')" class="bg-gray-200 rounded">2</button>
        <button onclick="appendCalc('3')" class="bg-gray-200 rounded">3</button>
        <button onclick="appendCalc('+')" class="bg-gray-300 rounded">+</button>
        <button onclick="appendCalc('0')" class="bg-gray-200 rounded">0</button>
        <button onclick="appendCalc('.')" class="bg-gray-200 rounded">.</button>
        <button onclick="calculate()" class="col-span-2 bg-blue-500 text-white rounded">=</button>
      </div>
    </div>

    <!-- Secret Chat UI -->
    <div id="chatContainer" class="flex flex-col h-[450px]">
      <h1 id="title" class="text-xl font-bold mb-3 text-center text-pink-600">Secret Chat üíï</h1>
      <div id="chatBox" class="flex-1 overflow-y-auto mb-2 p-2 border rounded bg-pink-50"></div>
      <textarea id="messageInput" class="w-full p-2 border rounded mb-2 text-sm" rows="2" placeholder="Type your message..."></textarea>
      <div class="flex gap-2">
        <button onclick="sendMessage('user')" class="flex-1 bg-pink-500 text-white p-2 rounded">Send (You)</button>
        <button onclick="sendMessage('gf')" class="flex-1 bg-purple-500 text-white p-2 rounded">Send (GF)</button>
        <button onclick="clearChat()" class="flex-1 bg-red-500 text-white p-2 rounded">Clear Chat</button>
      </div>
    </div>
  </div>

  <script>
    const secretCode = "143";
    let calcExpression = "0";

    const firebaseConfig = {
      apiKey: "AIza...", // Replace with your actual API key
      authDomain: "secret-chat-app.firebaseapp.com",
      databaseURL: "https://secret-chat-app.firebaseio.com",
      projectId: "calculator",
      storageBucket: "calculator.appspot.com",
      messagingSenderId: "495896981960",
      appId: "1:495896981960:web:0c1e1b6e6e2f0e5e2e9c9d"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function appendCalc(value) {
      if (calcExpression === "0") calcExpression = "";
      calcExpression += value;
      document.getElementById('calcDisplay').value = calcExpression;
    }

    function clearCalc() {
      calcExpression = "0";
      document.getElementById('calcDisplay').value = calcExpression;
    }

    function calculate() {
      let input = document.getElementById('calcDisplay').value;
      if (input === secretCode) {
        document.getElementById('calculatorContainer').style.display = 'none';
        document.getElementById('chatContainer').style.display = 'flex';
        loadMessages();
      } else {
        try {
          calcExpression = eval(input).toString();
          document.getElementById('calcDisplay').value = calcExpression;
        } catch {
          alert("Invalid calculation!");
          clearCalc();
        }
      }
    }

    function sendMessage(sender) {
      let input = document.getElementById('messageInput').value;
      if (input.trim()) {
        db.ref("messages").push({
          text: input,
          sender: sender,
          timestamp: Date.now()
        });
        document.getElementById('messageInput').value = '';
      }
    }

    function loadMessages() {
      let chatBox = document.getElementById('chatBox');
      chatBox.innerHTML = '';
      db.ref("messages").on("child_added", snapshot => {
        const msg = snapshot.val();
        let div = document.createElement('div');
        div.className = `chat-message ${msg.sender} fade-in`;
        div.innerHTML = `${msg.text} <span class="heart">‚ù§Ô∏è</span>`;
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
      });
    }

    function clearChat() {
      db.ref("messages").remove();
      document.getElementById('chatBox').innerHTML = '';
    }
  </script>
</body>
</html>
